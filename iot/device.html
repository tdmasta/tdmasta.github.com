---
layout: page
title: "IOT API"
description: ""
tagline: "Internet Of Things made easy with SENSOR&trade;"
scripts:
- name: custom
  type: inline
  content: "$(function() {$('.bs-docs-sidenav').affix();})"
---
{% include JB/setup %}
	
			<div class="span3 bs-docs-sidebar">
				<ul class="nav nav-list bs-docs-sidenav affix">
		          <li><a href="#overview"><i class="icon-chevron-right"></i> Overview </a></li>
		          <li><a href="#authentication"><i class="icon-chevron-right"></i> Authentication</a></li>
		          <li><a href="#msgs_history"><i class="icon-chevron-right"></i> Fetching messages history</a></li>
		          <li><a href="#recents_msgs"><i class="icon-chevron-right"></i> Fetching recents messages</a></li>
		          <li><a href="#fetch_devices"><i class="icon-chevron-right"></i> Fetching devices</a></li>
		          <li><a href="#change_status"><i class="icon-chevron-right"></i> Changing device status</a></li>
 				</ul>
			</div>

			<div class="span9">
				<section id="overview">
                	<h2>Device API <small>Overview</small></h2>
					<p>
						This api provides both module operations as well as stored data access through unified model. <br/>
						Check the <a href="/iot/iot.html" target="_blank">Iot model definition</a> for more information about data made available throught the IoT API. <br/>
					</p>
				</section>
				<hr/>
				<section id="authentication">
                <h4>Authentication</h4>
                <p>
                    Device Access requires custom header for authentication check.
                    <br/>
                    <table class="table table-bordered">
                        <thead>
                            <tr>
                                <th>Header</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>X-Snsr-Device-Key</td>
                                <td>your device token received upon authentication, see <a href="#DeviceAuthentication">Device authentication for more info</a></td>
                            </tr>
                        </tbody>
                    </table>
                </p>
                <br/><br/>
                <h4><a>GET /iot/devices/crc.json</a></h4>
                <br/>
                <table class="table">
                            <tbody>
                                <tr>
                                    <td><h6>Description</h6></td>
                                    <td>Device Authentication operation</td>
                                </tr>
                                <tr>
                                    <td><h6>Url</h6></td>
                                    <td><code>https://sensor.insgroup.fr/iot/devices/crc.json</code></td>
                                </tr>
                                <tr>
                                    <td><h6>Method</h6></td>
                                    <td>GET</td>
                                </tr>
                                <tr>
                                    <td><h6>Parameters</h6></td>
                                    <td>
                                        <ol>
                                            <li><code>sn</code> <i>required</i> the module serial number</li>
                                            <li><code>key</code> <i>required</i> The key provided with your device, available at packaging level</li>
                                        </ol>
                                    </td>
                                </tr>
                                <tr>
                                    <td><h6>Returns</h6></td>
                                    <td>Device token for use with corresponding header token
                                    <p>
                                    <strong>Sample JSON response</strong></p>
                                    <pre style="overflow:auto;">
QWxhZGRpbjpvcGVuIHNlc2FtZQ==
</pre>
                                    <h5>Return value definitions</h5>
                                    <table class="table table-bordered">
                                        <thead>
                                            <tr>
                                                <th>Field</th>
                                                <th>Description</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>token</td>
                                                <td>Base64 encoded token, to store and use for next indiviudal remote Device WS resources</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </td>
                            </tr>
                            <tr>
                                <td><h6>Errors</h6></td>
                                <td>
                                    <ul class="unstyled">
                                        <li><code>404</code> - The serial number was not found </li>
                                        <li><code>401</code> - The authentication information are missing or invalid </li>
                                    </ul>
                                </td>
                            </tr>
                        </tbody>
                    </table>
				</section>
				
				<section id="msgs_history">
                <h4><a>GET /iot/devices/msgs/history.json</a></h4>
                <br/>
                <table class="table">
                            <tbody>
                                <tr>
                                    <td><h6>Description</h6></td>
                                    <td>Device Messages history resolution</td>
                                </tr>
                                <tr>
                                    <td><h6>Url</h6></td>
                                    <td><code>https://sensor.insgroup.fr/iot/devices/msgs/history.json</code></td>
                                </tr>
                                <tr>
                                    <td><h6>Method</h6></td>
                                    <td>GET</td>
                                </tr>
                                <tr>
                                    <td><h6>Parameters</h6></td>
                                    <td>
                                        <ol>
                                            <li><code>sn</code> <i>required</i> the module serial number</li>
                                            <li><code>until</code> <i>optional</i> the date (GMT timestamp) as end date, default to now</li>
                                            <li><code>amount</code> <i>optional</i> the amount of event instance to be retrieved, default to 20 </li>
                                        </ol>
                                    </td>
                                </tr>
                                <tr>
                                    <td><h6>Returns</h6></td>
                                    <td>Information about last
                                    <p>
                                        <strong>Sample JSON response</strong></p>
                                        <pre style="overflow:auto;">
ADD SOME JSON HERE
                                </pre>
                                <h5>Return value definitions</h5>
                                <table class="table table-bordered">
                                    <thead>
                                        <tr>
                                            <th>Field</th>
                                            <th>Description</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>when</td>
                                            <td>Message reception timestamp (GMT)</td>
                                        </tr>
                                        <tr>
                                            <td>raw</td>
                                            <td>Raw Message content</td>
                                        </tr>
                                        <tr>
                                            <td>hr</td>
                                            <td>Human readable translation of the raw content</td>
                                        </tr>
                                        <tr>
                                            <td>lvl</td>
                                            <td>Signal level upon reception</td>
                                        </tr>
                                        <tr>
                                            <td>station</td>
                                            <td>Receiver station id</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </td>
                        </tr>
                        <tr>
                            <td><h6>Errors</h6></td>
                            <td>
                                <ul class="unstyled">
                                    <li><code>404</code> - The serial number was not found </li>
                                    <li><code>401</code> - The authentication token is invalid or missing </li>
                                </ul>
                            </td>
                        </tr>
                    </tbody>
                </table>
                </section>
				<section id="recents_msgs">
				<h4><a>GET /iot/devices/msgs/recents.json</a></h4>
                <br/>
                <table class="table">
                            <tbody>
                                <tr>
                                    <td><h6>Description</h6></td>
                                    <td>Device Messages history resolution</td>
                                </tr>
                                <tr>
                                    <td><h6>Url</h6></td>
                                    <td><code>https://sensor.insgroup.fr/iot/devices/msgs/recents.json</code></td>
                                </tr>
                                <tr>
                                    <td><h6>Method</h6></td>
                                    <td>GET</td>
                                </tr>
                                <tr>
                                    <td><h6>Parameters</h6></td>
                                    <td>
                                        <ol>
                                            <li><code>sn</code> <i>required</i> the module serial number</li>
                                            <li><code>after</code> <i>optional</i> the date (GMT timestamp) as end date, default to now</li>
                                            <li><code>amount</code> <i>optional</i> the amount of event instance to be retrieved, default to 20 </li>
                                        </ol>
                                    </td>
                                </tr>
                                <tr>
                                    <td><h6>Returns</h6></td>
                                    <td>
                                        Array of iot messages
                                        <p>
                                        <strong>Sample JSON response</strong></p>
                                        <pre style="overflow:auto">
ADD SOME JSON HERE
                                        </pre>
                                        <h5>Return value definitions</h5>
                                        <table class="table table-bordered">
                                            <thead>
                                                <tr>
                                                    <th>Field</th>
                                                    <th>Description</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>when</td>
                                                    <td>Message reception timestamp (GMT)</td>
                                                </tr>
                                                <tr>
                                                    <td>raw</td>
                                                    <td>Raw Message content</td>
                                                </tr>
                                                <tr>
                                                    <td>hr</td>
                                                    <td>Human readable translation of the raw content</td>
                                                </tr>
                                                <tr>
                                                    <td>lvl</td>
                                                    <td>Signal level upon reception</td>
                                                </tr>
                                                <tr>
                                                    <td>station</td>
                                                    <td>Receiver station id</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </td>
                                </tr>
                                <tr>
                                    <td><h6>Errors</h6></td>
                                    <td>
                                        <ul class="unstyled">
                                            <li><code>404</code> - The serial number was not found </li>
                                            <li><code>401</code> - The authentication token is invalid or missing </li>
                                        </ul>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
				</section>
				
				<section id="fetch_devices">
				<h4><a>GET /iot/devices/children.json</a></h4>
                <br/>
                <table class="table">
                            <tbody>
                                <tr>
                                    <td><h6>Description</h6></td>
                                    <td>Module devices resolution</td>
                                </tr>
                                <tr>
                                    <td><h6>Url</h6></td>
                                    <td><code>https://sensor.insgroup.fr/iot/devices/children.json</code></td>
                                </tr>
                                <tr>
                                    <td><h6>Method</h6></td>
                                    <td>GET</td>
                                </tr>
                                <tr>
                                    <td><h6>Parameters</h6></td>
                                    <td>
                                        <ol>
                                            <li><code>sn</code> <i>required</i> the module serial number</li>
                                        </ol>
                                    </td>
                                </tr>
                                <tr>
                                    <td><h6>Returns</h6></td>
                                    <td>
                                        Array of iot devices registered behind a gw module
                                        <p>
                                        <strong>Sample JSON response</strong></p>
                                        <pre style="overflow:auto">
                                        </pre>
                                        <h5>Return value definitions</h5>
                                        <table class="table table-bordered">
                                            <thead>
                                                <tr>
                                                    <th>Field</th>
                                                    <th>Description</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>when</td>
                                                    <td>Message reception timestamp (GMT)</td>
                                                </tr>
                                                <tr>
                                                    <td>raw</td>
                                                    <td>Raw Message content</td>
                                                </tr>
                                                <tr>
                                                    <td>hr</td>
                                                    <td>Human readable translation of the raw content</td>
                                                </tr>
                                                <tr>
                                                    <td>lvl</td>
                                                    <td>Signal level upon reception</td>
                                                </tr>
                                                <tr>
                                                    <td>station</td>
                                                    <td>Receiver station id</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </td>
                                </tr>
                                <tr>
                                    <td><h6>Errors</h6></td>
                                    <td>
                                        <ul class="unstyled">
                                            <li><code>404</code> - The serial number was not found </li>
                                            <li><code>401</code> - The authentication token is invalid or missing </li>
                                        </ul>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
				</section>

				<section id="change_status">
					<h4><a>POST /iot/devices/status.json</a></h4>
	                <br/>
	                <table class="table">
	                            <tbody>
	                                <tr>
	                                    <td><h6>Description</h6></td>
	                                    <td>Module devices Fetch Operation</td>
	                                </tr>
	                                <tr>
	                                    <td><h6>Url</h6></td>
	                                    <td><code>https://sensor.insgroup.fr/iot/devices/status.json</code></td>
	                                </tr>
	                                <tr>
	                                    <td><h6>Method</h6></td>
	                                    <td>POST</td>
	                                </tr>
	                                <tr>
	                                    <td><h6>Parameters</h6></td>
	                                    <td>
	                                        <ol>
	                                            <li><code>sn</code> <i>required</i> the module serial number</li>
	                                        </ol>
	                                    </td>
	                                </tr>
	                                <tr>
	                                    <td><h6>Returns</h6></td>
	                                    <td>
	                                        Array of iot Devices
	                                        <p>
	                                        <strong>Sample JSON response</strong></p>
	                                        <pre style="overflow:auto">
	
	                                        </pre>
	                                        <h5>Return value definitions</h5>
	                                        <table class="table table-bordered">
	                                            <thead>
	                                                <tr>
	                                                    <th>Field</th>
	                                                    <th>Description</th>
	                                                </tr>
	                                            </thead>
	                                            <tbody>
	                                                <tr>
	                                                    <td>when</td>
	                                                    <td>Message reception timestamp (GMT)</td>
	                                                </tr>
	                                                <tr>
	                                                    <td>raw</td>
	                                                    <td>Raw Message content</td>
	                                                </tr>
	                                                <tr>
	                                                    <td>hr</td>
	                                                    <td>Human readable translation of the raw content</td>
	                                                </tr>
	                                                <tr>
	                                                    <td>lvl</td>
	                                                    <td>Signal level upon reception</td>
	                                                </tr>
	                                                <tr>
	                                                    <td>station</td>
	                                                    <td>Receiver station id</td>
	                                                </tr>
	                                            </tbody>
	                                        </table>
	                                    </td>
	                                </tr>
	                                <tr>
	                                    <td><h6>Errors</h6></td>
	                                    <td>
	                                        <ul class="unstyled">
	                                            <li><code>404</code> - The serial number was not found </li>
	                                            <li><code>401</code> - The authentication token is invalid or missing </li>
	                                        </ul>
	                                    </td>
	                                </tr>
	                            </tbody>
	                        </table>
					</section>
				</div>
				</div>	