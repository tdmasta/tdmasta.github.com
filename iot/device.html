---
layout: page
title: "IOT API"
description: ""
tagline: "Internet Of Things made easy with SENSOR&trade;"
---
{% include JB/setup %}
	
<div class="span3 bs-docs-sidebar">
	<ul class="nav nav-list bs-docs-sidenav affix">
         <li><a href="#overview"><i class="icon-chevron-right"></i> Overview </a></li>
         <li><a href="#authentication"><i class="icon-chevron-right"></i> Authentication</a></li>
         <li><a href="#msgs_history"><i class="icon-chevron-right"></i> Fetching messages history</a></li>
         <li><a href="#recents_msgs"><i class="icon-chevron-right"></i> Fetching recents messages</a></li>
         <li><a href="#fetch_devices"><i class="icon-chevron-right"></i> Fetching devices</a></li>
         <li><a href="#change_status"><i class="icon-chevron-right"></i> Changing device status</a></li>
		</ul>
</div>

<div class="span9">
	<section id="overview">
		<div class="page-header">
             	<h1>Device API <small>Overview</small></h1>
		</div>
		<p>
			This api provides both module operations as well as stored data access through unified model. <br/>
			Check the <a href="/iot/iot.html" target="_blank">Iot model definition</a> for more information about data made available throught the IoT API. <br/>
		</p>
	</section>
	<hr/>
	<section id="authentication">
	<div class="page-header">
             	<h2>Authentication</h2>
	</div>
             <p>
                 Device Access requires custom header for authentication check.
                 <br/>
                 <table class="table table-bordered">
                     <thead>
                         <tr>
                             <th>Header</th>
                             <th>Description</th>
                         </tr>
                     </thead>
                     <tbody>
                         <tr>
                             <td>X-Snsr-Device-Key</td>
                             <td>your device token received upon authentication, see <a href="#DeviceAuthentication">Device authentication for more info</a></td>
                         </tr>
                     </tbody>
                 </table>
             </p>
             <br/><br/>
             <h4><a>GET /iot/devices/crc.json</a></h4>
             <br/>
             <table class="table">
                         <tbody>
                             <tr>
                                 <td><h6>Description</h6></td>
                                 <td>Device Authentication operation</td>
                             </tr>
                             <tr>
                                 <td><h6>Url</h6></td>
                                 <td><code>https://sensor.insgroup.fr/iot/devices/crc.json</code></td>
                             </tr>
                             <tr>
                                 <td><h6>Method</h6></td>
                                 <td>GET</td>
                             </tr>
                             <tr>
                                 <td><h6>Parameters</h6></td>
                                 <td>
                                     <ol>
                                         <li><code>sn</code> <i>required</i> the module serial number</li>
                                         <li><code>key</code> <i>required</i> The key provided with your device, available at packaging level</li>
                                     </ol>
                                 </td>
                             </tr>
                             <tr>
                                 <td><h6>Returns</h6></td>
                                 <td>Device token for use with corresponding header token
                                 <p>
                                 <strong>Sample JSON response</strong></p>
                                 <pre style="overflow:auto;">
QWxhZGRpbjpvcGVuIHNlc2FtZQ==
</pre>
                                 <h5>Return value definitions</h5>
                                 <table class="table table-bordered">
                                     <thead>
                                         <tr>
                                             <th>Field</th>
                                             <th>Description</th>
                                         </tr>
                                     </thead>
                                     <tbody>
                                         <tr>
                                             <td>token</td>
                                             <td>Base64 encoded token, to store and use for next indiviudal remote Device WS resources</td>
                                         </tr>
                                     </tbody>
                                 </table>
                             </td>
                         </tr>
                         <tr>
                             <td><h6>Errors</h6></td>
                             <td>
                                 <ul class="unstyled">
                                     <li><code>404</code> - The serial number was not found </li>
                                     <li><code>401</code> - The authentication information are missing or invalid </li>
                                 </ul>
                             </td>
                         </tr>
                     </tbody>
                 </table>
	</section>
	
	<section id="msgs_history">
	<div class="page-header">
		<h2>Fetching messages history</h2>
	</div>
             <h4><a>GET /iot/devices/msgs/history.json</a></h4>
             <br/>
             <table class="table">
                         <tbody>
                             <tr>
                                 <td><h6>Description</h6></td>
                                 <td>Device Messages history resolution</td>
                             </tr>
                             <tr>
                                 <td><h6>Url</h6></td>
                                 <td><code>https://sensor.insgroup.fr/iot/devices/msgs/history.json</code></td>
                             </tr>
                             <tr>
                                 <td><h6>Method</h6></td>
                                 <td>GET</td>
                             </tr>
                             <tr>
                                 <td><h6>Parameters</h6></td>
                                 <td>
                                     <ol>
                                         <li><code>sn</code> <i>required</i> the module serial number</li>
                                         <li><code>until</code> <i>optional</i> the date (GMT timestamp) as end date, default to now</li>
                                         <li><code>amount</code> <i>optional</i> the amount of event instance to be retrieved, default to 20 </li>
                                     </ol>
                                 </td>
                             </tr>
                             <tr>
                                 <td><h6>Returns</h6></td>
                                 <td>Information about last
                                 <p>
                                     <strong>Sample JSON response</strong></p>
                                     <pre style="overflow:auto;">
[
    {
        "contrib": {
            "temp": "LOW"
        }, 
        "ctxt": {
            "active": true, 
            "alerts": 0, 
            "alerts_ack": 0, 
            "battery": "UNKNOWN", 
            "firstseen": "Mar 25, 2013 2:35:36 PM", 
            "id": "125010855", 
            "index": 6, 
            "lastseen": "Mar 25, 2013 2:35:32 PM", 
            "level": "UNKNOWN", 
            "losts": 0, 
            "msgs": 0, 
            "network": "UNKNOWN", 
            "serial": "1FA0/6", 
            "status": "UNDEFINED", 
            "tamper": "UNKNOWN", 
            "temp": "LOW", 
            "type": "OTHER", 
            "watched": false
        }, 
        "extra": {}, 
        "lvl": "34.49", 
        "station": "003B", 
        "type": "event:templow", 
        "when": 1364222132034
    }, 
    {
        "contrib": {
            "level": "ON"
        }, 
        "ctxt": {
            "active": true, 
            "alerts": 0, 
            "alerts_ack": 0, 
            "battery": "ON", 
            "firstseen": "Mar 25, 2013 2:28:43 PM", 
            "id": "125010772", 
            "index": 4, 
            "lastseen": "Mar 25, 2013 2:29:43 PM", 
            "level": "ON", 
            "losts": 0, 
            "msgs": 1, 
            "network": "UNKNOWN", 
            "serial": "1FA0/4", 
            "status": "UNDEFINED", 
            "tamper": "UNKNOWN", 
            "temp": "UNKNOWN", 
            "type": "OTHER", 
            "watched": false
        }, 
        "extra": {}, 
        "lvl": "34.47", 
        "station": "003B", 
        "type": "event:rssiok", 
        "when": 1364221783996
    }
]

                             </pre>
                             <h5>Return value definitions</h5>
                              <table class="table table-bordered">
                                  <thead>
                                      <tr>
                                          <th>Field</th>
                                          <th>Description</th>
                                      </tr>
                                  </thead>
                                  <tbody>
                                      <tr>
                                          <td>when</td>
                                          <td>Message reception timestamp (GMT)</td>
                                      </tr>
                                      <tr>
                                          <td>lvl</td>
                                          <td>Signal level upon reception</td>
                                      </tr>
                                      <tr>
                                          <td>station</td>
                                          <td>Receiver station id</td>
                                      </tr>
                                      <tr>
                                          <td>extra</td>
                                          <td>Additional infos</td>
                                      </tr>
                                      <tr>
                                          <td>type</td>
                                          <td>Frame type</td>
                                      </tr>
                                      <tr>
                                          <td>contrib</td>
                                          <td>Device Field with corresponding value provided by the frame</td>
                                      </tr>
                                      <tr>
                                          <td>ctxt</td>
                                          <td>Device context at the time of frame reception</td>
                                      </tr>
                                  </tbody>
                              </table>
								<p>
									More information about message structure available <a href="/iot/iot.html#iot_frame" target="_blank"> Here </a>
								</p>
                         </td>
                     </tr>
                     <tr>
                         <td><h6>Errors</h6></td>
                         <td>
                             <ul class="unstyled">
                                 <li><code>404</code> - The serial number was not found </li>
                                 <li><code>401</code> - The authentication token is invalid or missing </li>
                             </ul>
                         </td>
                     </tr>
                 </tbody>
             </table>
             </section>
	<section id="recents_msgs">
		<div class="page-header">
			<h2>Fetching latests messages</h2>
		</div>
	<h4><a>GET /iot/devices/msgs/recents.json</a></h4>
             <br/>
             <table class="table">
                         <tbody>
                             <tr>
                                 <td><h6>Description</h6></td>
                                 <td>Device Messages history resolution</td>
                             </tr>
                             <tr>
                                 <td><h6>Url</h6></td>
                                 <td><code>https://sensor.insgroup.fr/iot/devices/msgs/recents.json</code></td>
                             </tr>
                             <tr>
                                 <td><h6>Method</h6></td>
                                 <td>GET</td>
                             </tr>
                             <tr>
                                 <td><h6>Parameters</h6></td>
                                 <td>
                                     <ol>
                                         <li><code>sn</code> <i>required</i> the module serial number</li>
                                         <li><code>after</code> <i>optional</i> the date (GMT timestamp) as end date, default to now</li>
                                         <li><code>amount</code> <i>optional</i> the amount of event instance to be retrieved, default to 20 </li>
                                     </ol>
                                 </td>
                             </tr>
                             <tr>
                                 <td><h6>Returns</h6></td>
                                 <td>
                                     Array of iot messages
                                     <p>
                                     <strong>Sample JSON response</strong></p>
                                     <pre style="overflow:auto">
[
    {
        "contrib": {
            "temp": "LOW"
        }, 
        "ctxt": {
            "active": true, 
            "alerts": 0, 
            "alerts_ack": 0, 
            "battery": "UNKNOWN", 
            "firstseen": "Mar 25, 2013 2:35:36 PM", 
            "id": "125010855", 
            "index": 6, 
            "lastseen": "Mar 25, 2013 2:35:32 PM", 
            "level": "UNKNOWN", 
            "losts": 0, 
            "msgs": 0, 
            "network": "UNKNOWN", 
            "serial": "1FA0/6", 
            "status": "UNDEFINED", 
            "tamper": "UNKNOWN", 
            "temp": "LOW", 
            "type": "OTHER", 
            "watched": false
        }, 
        "extra": {}, 
        "lvl": "34.49", 
        "station": "003B", 
        "type": "event:templow", 
        "when": 1364222132034
    }
]
                                     </pre>
                                     <h5>Return value definitions</h5>
                                     <table class="table table-bordered">
                                         <thead>
                                             <tr>
                                                 <th>Field</th>
                                                 <th>Description</th>
                                             </tr>
                                         </thead>
                                         <tbody>
                                             <tr>
                                                 <td>when</td>
                                                 <td>Message reception timestamp (GMT)</td>
                                             </tr>
                                             <tr>
                                                 <td>lvl</td>
                                                 <td>Signal level upon reception</td>
                                             </tr>
                                             <tr>
                                                 <td>station</td>
                                                 <td>Receiver station id</td>
                                             </tr>
                                             <tr>
                                                 <td>extra</td>
                                                 <td>Additional infos</td>
                                             </tr>
                                             <tr>
                                                 <td>type</td>
                                                 <td>Frame type</td>
                                             </tr>
                                             <tr>
                                                 <td>contrib</td>
                                                 <td>Device Field with corresponding value provided by the frame</td>
                                             </tr>
                                             <tr>
                                                 <td>ctxt</td>
                                                 <td>Device context at the time of frame reception</td>
                                             </tr>
                                         </tbody>
                                     </table>
									<p>
										More information about message structure available <a href="/iot/iot.html#iot_frame" target="_blank"> Here </a>
									</p>
                                 </td>
                             </tr>
                             <tr>
                                 <td><h6>Errors</h6></td>
                                 <td>
                                     <ul class="unstyled">
                                         <li><code>404</code> - The serial number was not found </li>
                                         <li><code>401</code> - The authentication token is invalid or missing </li>
                                     </ul>
                                 </td>
                             </tr>
                         </tbody>
                     </table>
	</section>
	
	<section id="fetch_devices">
		<div class="page-header">
			<h2>Fetching devices information</h2>
		</div>
	<h4><a>GET /iot/devices/children.json</a></h4>
             <br/>
             <table class="table">
                         <tbody>
                             <tr>
                                 <td><h6>Description</h6></td>
                                 <td>Module devices resolution</td>
                             </tr>
                             <tr>
                                 <td><h6>Url</h6></td>
                                 <td><code>https://sensor.insgroup.fr/iot/devices/children.json</code></td>
                             </tr>
                             <tr>
                                 <td><h6>Method</h6></td>
                                 <td>GET</td>
                             </tr>
                             <tr>
                                 <td><h6>Parameters</h6></td>
                                 <td>
                                     <ol>
                                         <li><code>sn</code> <i>required</i> the module serial number</li>
                                     </ol>
                                 </td>
                             </tr>
                             <tr>
                                 <td><h6>Returns</h6></td>
                                 <td>
                                     Array of iot devices registered behind a gw module
                                     <p>
                                     <strong>Sample JSON response</strong></p>
                                     <pre style="overflow:auto">
[
    {
        "active": true, 
        "alerts": 0, 
        "alerts_ack": 0, 
        "battery": "UNKNOWN", 
        "category": "4321", 
        "firstseen": "Mar 22, 2013 8:52:41 AM", 
        "id": "124953171", 
        "index": 2, 
        "lastseen": "Mar 25, 2013 2:25:12 PM", 
        "level": "UNKNOWN", 
        "losts": 192, 
        "msgs": 20, 
        "network": "ON", 
        "serial": "1FA0/2", 
        "status": "UNDEFINED", 
        "tamper": "UNKNOWN", 
        "temp": "UNKNOWN", 
        "type": "OTHER", 
        "uid": "00004321", 
        "watched": false
    }, 
    {
        "active": true, 
        "alerts": 0, 
        "alerts_ack": 0, 
        "battery": "ON", 
        "category": "1001", 
        "firstseen": "Mar 22, 2013 8:53:19 AM", 
        "id": "124953184", 
        "index": 0, 
        "lastseen": "Mar 25, 2013 2:23:52 PM", 
        "level": "UNKNOWN", 
        "losts": 192, 
        "msgs": 20, 
        "network": "UNKNOWN", 
        "serial": "1FA0/0", 
        "status": "UNDEFINED", 
        "tamper": "UNKNOWN", 
        "temp": "UNKNOWN", 
        "type": "OTHER", 
        "uid": "00000001", 
        "watched": false
    }, 
    {
        "active": true, 
        "alerts": 0, 
        "alerts_ack": 0, 
        "battery": "OFF", 
        "firstseen": "Mar 22, 2013 8:54:08 AM", 
        "id": "124953210", 
        "index": 1, 
        "lastseen": "Mar 25, 2013 2:28:10 PM", 
        "level": "UNKNOWN", 
        "losts": 192, 
        "msgs": 20, 
        "network": "UNKNOWN", 
        "serial": "1FA0/1", 
        "status": "UNDEFINED", 
        "tamper": "OFF", 
        "temp": "UNKNOWN", 
        "type": "OTHER", 
        "watched": false
    }, 
    {
        "active": true, 
        "alerts": 0, 
        "alerts_ack": 0, 
        "battery": "UNKNOWN", 
        "category": "1001", 
        "firstseen": "Mar 22, 2013 1:49:53 PM", 
        "id": "124955666", 
        "index": 3, 
        "lastseen": "Mar 22, 2013 1:49:49 PM", 
        "level": "UNKNOWN", 
        "losts": 192, 
        "msgs": 20, 
        "network": "UNKNOWN", 
        "serial": "1FA0/3", 
        "status": "UNDEFINED", 
        "tamper": "UNKNOWN", 
        "temp": "UNKNOWN", 
        "type": "OTHER", 
        "uid": "00000001", 
        "watched": false
    }, 
    {
        "active": true, 
        "alerts": 0, 
        "alerts_ack": 0, 
        "battery": "ON", 
        "firstseen": "Mar 25, 2013 2:28:43 PM", 
        "id": "125010772", 
        "index": 4, 
        "lastseen": "Mar 25, 2013 2:29:43 PM", 
        "level": "ON", 
        "losts": 192, 
        "msgs": 20, 
        "network": "UNKNOWN", 
        "serial": "1FA0/4", 
        "status": "UNDEFINED", 
        "tamper": "UNKNOWN", 
        "temp": "UNKNOWN", 
        "type": "OTHER", 
        "watched": false
    }, 
    {
        "active": true, 
        "alerts": 0, 
        "alerts_ack": 0, 
        "battery": "UNKNOWN", 
        "firstseen": "Mar 25, 2013 2:35:36 PM", 
        "id": "125010855", 
        "index": 6, 
        "lastseen": "Mar 25, 2013 2:35:32 PM", 
        "level": "UNKNOWN", 
        "losts": 192, 
        "msgs": 20, 
        "network": "UNKNOWN", 
        "serial": "1FA0/6", 
        "status": "UNDEFINED", 
        "tamper": "UNKNOWN", 
        "temp": "LOW", 
        "type": "OTHER", 
        "watched": false
    }
]
                                     </pre>
                                     <h5>Return value definitions</h5>
                                     <table class="table table-bordered">
                                         <thead>
                                             <tr>
                                                 <th>Field</th>
                                                 <th>Description</th>
                                             </tr>
                                         </thead>
                                         <tbody>
                                             <tr>
                                                 <td>when</td>
                                                 <td>Message reception timestamp (GMT)</td>
                                             </tr>
                                             <tr>
                                                 <td>raw</td>
                                                 <td>Raw Message content</td>
                                             </tr>
                                             <tr>
                                                 <td>hr</td>
                                                 <td>Human readable translation of the raw content</td>
                                             </tr>
                                             <tr>
                                                 <td>lvl</td>
                                                 <td>Signal level upon reception</td>
                                             </tr>
                                             <tr>
                                                 <td>station</td>
                                                 <td>Receiver station id</td>
                                             </tr>
                                         </tbody>
                                     </table>
                                 </td>
                             </tr>
                             <tr>
                                 <td><h6>Errors</h6></td>
                                 <td>
                                     <ul class="unstyled">
                                         <li><code>404</code> - The serial number was not found </li>
                                         <li><code>401</code> - The authentication token is invalid or missing </li>
                                     </ul>
                                 </td>
                             </tr>
                         </tbody>
                     </table>
	</section>

	<section id="change_status">
		<div class="page-header">
			<h2>Changing device status</h2>
		</div>
		<h4><a>POST /iot/devices/status.json</a></h4>
              <br/>
              <table class="table">
                          <tbody>
                              <tr>
                                  <td><h6>Description</h6></td>
                                  <td>Module devices Fetch Operation</td>
                              </tr>
                              <tr>
                                  <td><h6>Url</h6></td>
                                  <td><code>https://sensor.insgroup.fr/iot/devices/status.json</code></td>
                              </tr>
                              <tr>
                                  <td><h6>Method</h6></td>
                                  <td>POST</td>
                              </tr>
                              <tr>
                                  <td><h6>Parameters</h6></td>
                                  <td>
                                      <ol>
                                          <li><code>id</code> <i>required</i> The device id</li>
                                          <li><code>value</code> <i>required</i> The new state value</li>
                                      </ol>
                                  </td>
                              </tr>
                              <tr>
                                  <td><h6>Returns</h6></td>
                                  <td>void</td>
                              </tr>
                              <tr>
                                  <td><h6>Errors</h6></td>
                                  <td>
                                      <ul class="unstyled">
                                          <li><code>404</code> - The serial number was not found </li>
                                          <li><code>401</code> - The authentication token is invalid or missing </li>
                                      </ul>
                                  </td>
                              </tr>
                          </tbody>
                      </table>
		</section>
	</div>
</div>